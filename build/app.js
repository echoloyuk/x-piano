!function(e){var t={};function i(a){if(t[a])return t[a].exports;var n=t[a]={i:a,l:!1,exports:{}};return e[a].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(a,n,function(t){return e[t]}.bind(null,n));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";var a=function(e){return e&&e.__esModule?e:{default:e}}(i(1));X("oscillator").setup(!0),window.customElements.define("x-piano",a.default);var n=function(e){switch(parseInt((e+9)%12,10)){case 0:case 1:return 0;case 2:case 3:return 1;case 4:return 2;case 5:case 6:return 3;case 7:case 8:return 4;case 9:case 10:return 5;case 11:return 6}},l=function(e){var t=-1!==[1,4,6,9,11,13,16,18,21,23,25,28,30,33,35,37,40,42,45,47,49,52,54,57,59,61,64,66,69,71,73,76,78,81,83,85].indexOf(e),i=0;return e>=0&&e<=2?i=.0625:e>=3&&e<=14?i=.125:e>=15&&e<=26?i=.25:e>=27&&e<=38?i=.5:e>=39&&e<=50?i=1:e>=51&&e<=62?i=2:e>=63&&e<=74?i=4:e>=75&&e<=86?i=8:e>=87&&e<=98&&(i=16),t&&(i*=Math.pow(2,1/12)),i};try{X("oneshot").setup({resources:["oneshots/C.wav","oneshots/D.wav","oneshots/E.wav","oneshots/F.wav","oneshots/G.wav","oneshots/A.wav","oneshots/B.wav"],settings:function(){for(var e=new Array(88),t=0;t<88;t++){var i={buffer:0,rate:1,loop:!1,start:0,end:0,volume:1};i.buffer=n(t),i.rate=l(t),e[t]=i}return e}(),timeout:6e4,success:function(){document.querySelector("x-piano").removeAttribute("loading")}})}catch(e){window.alert(e.message)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}(),n=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.attachShadow({mode:"open"}),i.state=e,i.isDown=!1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,HTMLElement),a(t,null,[{key:"observedAttributes",get:function(){return["ui-only","type","volume","octave","transpose","glide","attack","decay","sustain","release"]}}]),a(t,[{key:"setState",value:function(e){this.state=Object.assign({},this.state,e),this.render()}},{key:"onMouseDown",value:function(e){if(e.currentTarget.classList.add("-on"),this.isDown=!0,!this.hasAttribute("ui-only")){var t=parseInt(e.currentTarget.getAttribute("data-index"),10);if("piano"===this.type)X("oneshot").start(t);else if("noise"===this.type)X("noise").start();else{var i=X.toFrequencies(t);X("oscillator").start(i)}}}},{key:"onMouseUp",value:function(e){if(e.currentTarget.classList.remove("-on"),this.isDown=!1,!this.hasAttribute("ui-only")){var t=parseInt(e.currentTarget.getAttribute("data-index"),10);"piano"===this.type?X("oneshot").stop(t):"noise"===this.type?X("noise").stop():X("oscillator").stop()}}},{key:"onMouseEnter",value:function(e){if(this.isDown&&(e.currentTarget.classList.add("-on"),!this.hasAttribute("ui-only"))){var t=parseInt(e.currentTarget.getAttribute("data-index"),10);if("piano"===this.type)X("oneshot").start(t);else if("noise"===this.type)X("noise").start();else{var i=X.toFrequencies(t);X("oscillator").start(i)}}}},{key:"onMouseLeave",value:function(e){if(this.isDown&&(e.currentTarget.classList.remove("-on"),!this.hasAttribute("ui-only"))){var t=parseInt(e.currentTarget.getAttribute("data-index"),10);"piano"===this.type?X("oneshot").stop(t):"noise"===this.type?X("noise").stop():X("oscillator").stop()}}},{key:"setAttributes",value:function(){X("oscillator").param("mastervolume",this.getAttribute("volume")),X("oscillator").module("glide").param("time",this.getAttribute("glide")),X("oscillator").module("envelopegenerator").param("attack",this.getAttribute("attack")),X("oscillator").module("envelopegenerator").param("decay",this.getAttribute("decay")),X("oscillator").module("envelopegenerator").param("sustain",this.getAttribute("sustain")),X("oscillator").module("envelopegenerator").param("release",this.getAttribute("release")),this.type=this.getAttribute("type"),"piano"===this.type&&"noise"===this.type||X("oscillator").get(0).param("type",this.type),X("oscillator").get(0).param("octave",this.getAttribute("octave")),X("oneshot").param("mastervolume",this.getAttribute("volume")),X("oneshot").param("transpose",this.getAttribute("transpose"))}},{key:"connectedCallback",value:function(){this.setAttributes(),this.render();var e=!0,t=!1,i=void 0;try{for(var a,n=this.shadowRoot.querySelectorAll('[role="button"]')[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var l=a.value;l.addEventListener("mousedown",this.onMouseDown.bind(this),!1),l.addEventListener("mouseup",this.onMouseUp.bind(this),!1),l.addEventListener("mouseenter",this.onMouseEnter.bind(this),!1),l.addEventListener("mouseleave",this.onMouseLeave.bind(this),!1),l.addEventListener("touchstart",this.onMouseDown.bind(this),!1),l.addEventListener("touchend",this.onMouseUp.bind(this),!1)}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"disconnectedCallback",value:function(){var e=!0,t=!1,i=void 0;try{for(var a,n=this.shadowRoot.querySelectorAll('[role="button"]')[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var l=a.value;l.removeEventListener("mousedown",this.onMouseDown.bind(this),!1),l.removeEventListener("mouseup",this.onMouseUp.bind(this),!1),l.removeEventListener("mouseenter",this.onMouseEnter.bind(this),!1),l.removeEventListener("mouseleave",this.onMouseLeave.bind(this),!1),l.removeEventListener("touchstart",this.onMouseDown.bind(this),!1),l.removeEventListener("touchend",this.onMouseUp.bind(this),!1)}}catch(e){t=!0,i=e}finally{try{!e&&n.return&&n.return()}finally{if(t)throw i}}}},{key:"attributeChangedCallback",value:function(){this.setAttributes()}},{key:"render",value:function(){this.shadowRoot.innerHTML='\n            <style>\n                .Piano {\n                    position: relative;\n                    z-index: 1;\n                    margin: 0 auto;\n                    border-top: 44px solid #1b1b1b;\n                    border-right: 16px solid #1b1b1b;\n                    border-bottom: 16px solid #1b1b1b;\n                    border-left: 16px solid #1b1b1b;\n                    width: 1196px;\n                    height: 150px;\n                    transition: opacity ease 0.6s;\n                }\n\n                :host([loading]) .Piano {\n                    opacity: 0.2;\n                }\n\n                .Piano__black {\n                    position: absolute;\n                    top: 0;\n                    left: 4px;\n                    z-index: 3;\n                    margin: 0;\n                    padding: 0;\n                    list-style: none;\n                    display: flex;\n                    -webkit-flex-direction: row;\n                    flex-direction: row;\n                }\n\n                .Piano__white {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    z-index: 2;\n                    margin: 0;\n                    padding: 0;\n                    list-style: none;\n                    display: flex;\n                    -webkit-flex-direction: row;\n                    flex-direction: row;\n                }\n\n                .Piano li {\n                    display: inline-block;\n                    cursor: pointer;\n                    user-select: none;\n                }\n\n                .Piano__black > li {\n                    margin-left: 12px;\n                    width: 11px;\n                    height: 95px;\n                    background-color: #555;\n                    box-shadow: 0px -4px 0px 4px #000 inset;\n                }\n\n                .Piano__black > li.-on {\n                    background-color: #000;\n                }\n\n                .Piano__white > li {\n                    width: 23px;\n                    height: 150px;\n                    box-shadow: 0px -2px 0px 2px #ddd inset;\n                }\n\n                .Piano__white > li.-on {\n                    background-color: #ddd;\n                }\n\n                .Piano li.-skip {\n                    display: inline-block;\n                    margin-left: 12px;\n                    width: 11px;\n                    height: 95px;\n                    visibility: hidden;\n                }\n            </style>\n            <div class="Piano">\n                <ol class="Piano__black">\n                    <li role="button" data-index="1" aria-label="1"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="4" aria-label="4"></li>\n                    <li role="button" data-index="6" aria-label="6"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="9" aria-label="9"></li>\n                    <li role="button" data-index="11" aria-label="11"></li>\n                    <li role="button" data-index="13" aria-label="13"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="16" aria-label="16"></li>\n                    <li role="button" data-index="18" aria-label="18"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="21" aria-label="21"></li>\n                    <li role="button" data-index="23" aria-label="23"></li>\n                    <li role="button" data-index="25" aria-label="25"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="28" aria-label="28"></li>\n                    <li role="button" data-index="30" aria-label="30"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="33" aria-label="33"></li>\n                    <li role="button" data-index="35" aria-label="35"></li>\n                    <li role="button" data-index="37" aria-label="37"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="40" aria-label="40"></li>\n                    <li role="button" data-index="42" aria-label="42"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="45" aria-label="45"></li>\n                    <li role="button" data-index="47" aria-label="47"></li>\n                    <li role="button" data-index="49" aria-label="49"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="52" aria-label="52"></li>\n                    <li role="button" data-index="54" aria-label="54"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="57" aria-label="57"></li>\n                    <li role="button" data-index="59" aria-label="59"></li>\n                    <li role="button" data-index="61" aria-label="61"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="64" aria-label="64"></li>\n                    <li role="button" data-index="66" aria-label="66"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="69" aria-label="69"></li>\n                    <li role="button" data-index="71" aria-label="71"></li>\n                    <li role="button" data-index="73" aria-label="73"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="76" aria-label="76"></li>\n                    <li role="button" data-index="78" aria-label="78"></li>\n                    <li class="-skip"></li>\n                    <li role="button" data-index="81" aria-label="81"></li>\n                    <li role="button" data-index="83" aria-label="83"></li>\n                    <li role="button" data-index="85" aria-label="85"></li>\n                </ol>\n                <ol class="Piano__white">\n                    <li role="button" data-index="0" aria-label="0"></li>\n                    <li role="button" data-index="2" aria-label="2"></li>\n                    <li role="button" data-index="3" aria-label="3"></li>\n                    <li role="button" data-index="5" aria-label="5"></li>\n                    <li role="button" data-index="7" aria-label="7"></li>\n                    <li role="button" data-index="8" aria-label="8"></li>\n                    <li role="button" data-index="10" aria-label="10"></li>\n                    <li role="button" data-index="12" aria-label="12"></li>\n                    <li role="button" data-index="14" aria-label="14"></li>\n                    <li role="button" data-index="15" aria-label="15"></li>\n                    <li role="button" data-index="17" aria-label="17"></li>\n                    <li role="button" data-index="19" aria-label="19"></li>\n                    <li role="button" data-index="20" aria-label="20"></li>\n                    <li role="button" data-index="22" aria-label="22"></li>\n                    <li role="button" data-index="24" aria-label="24"></li>\n                    <li role="button" data-index="26" aria-label="26"></li>\n                    <li role="button" data-index="27" aria-label="27"></li>\n                    <li role="button" data-index="29" aria-label="29"></li>\n                    <li role="button" data-index="31" aria-label="31"></li>\n                    <li role="button" data-index="33" aria-label="33"></li>\n                    <li role="button" data-index="34" aria-label="34"></li>\n                    <li role="button" data-index="36" aria-label="36"></li>\n                    <li role="button" data-index="38" aria-label="38"></li>\n                    <li role="button" data-index="39" aria-label="39"></li>\n                    <li role="button" data-index="41" aria-label="41"></li>\n                    <li role="button" data-index="43" aria-label="43"></li>\n                    <li role="button" data-index="44" aria-label="44"></li>\n                    <li role="button" data-index="46" aria-label="46"></li>\n                    <li role="button" data-index="48" aria-label="48"></li>\n                    <li role="button" data-index="50" aria-label="50"></li>\n                    <li role="button" data-index="51" aria-label="51"></li>\n                    <li role="button" data-index="53" aria-label="53"></li>\n                    <li role="button" data-index="55" aria-label="55"></li>\n                    <li role="button" data-index="56" aria-label="56"></li>\n                    <li role="button" data-index="58" aria-label="58"></li>\n                    <li role="button" data-index="60" aria-label="60"></li>\n                    <li role="button" data-index="62" aria-label="62"></li>\n                    <li role="button" data-index="63" aria-label="63"></li>\n                    <li role="button" data-index="65" aria-label="65"></li>\n                    <li role="button" data-index="67" aria-label="67"></li>\n                    <li role="button" data-index="68" aria-label="68"></li>\n                    <li role="button" data-index="70" aria-label="70"></li>\n                    <li role="button" data-index="72" aria-label="72"></li>\n                    <li role="button" data-index="74" aria-label="74"></li>\n                    <li role="button" data-index="75" aria-label="75"></li>\n                    <li role="button" data-index="77" aria-label="77"></li>\n                    <li role="button" data-index="79" aria-label="79"></li>\n                    <li role="button" data-index="80" aria-label="80"></li>\n                    <li role="button" data-index="82" aria-label="82"></li>\n                    <li role="button" data-index="84" aria-label="84"></li>\n                    <li role="button" data-index="86" aria-label="86"></li>\n                    <li role="button" data-index="87" aria-label="87"></li>\n                </ol>\n            </div>\n        '}}]),t}();t.default=n}]);
//# sourceMappingURL=app.js.map